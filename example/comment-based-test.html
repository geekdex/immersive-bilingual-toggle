<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基于注释ID的翻译示例</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            font-size: 14px;
            max-width: 400px;
        }
        .controls button {
            margin: 5px;
            padding: 8px 12px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
            background: #007bff;
            color: white;
        }
        .controls button:hover {
            background: #0056b3;
        }
        .info {
            background: #e9ecef;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            max-height: 200px;
            overflow-y: auto;
        }
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="controls">
        <div><strong>基于注释ID的翻译测试</strong></div>
        <button onclick="showTranslationData()">查看翻译数据</button>
        <button onclick="toggleAllTranslations()">切换所有翻译</button>
        <div class="info" id="info"></div>
    </div>

    <h1>The Rust Programming Language</h1>

    <p><em>by Steve Klabnik, Carol Nichols, and Chris Krycho, with contributions from the Rust Community</em></p>

    <!-- trans:intro -->
    <p>This version of the text assumes you're using Rust 1.90.0 (released 2025-09-18) or later with <code>edition = "2024"</code> in the <em>Cargo.toml</em> file of all projects to configure them to use Rust 2024 Edition idioms.</p>

    <!-- trans:installation -->
    <p>See the "Installation" section of Chapter 1 for instructions on installing or updating Rust, and see Appendix E for information on editions.</p>

    <div class="demo-section">
        <h2>Variables and Mutability</h2>
        
        <!-- trans:variables-intro -->
        <p>By default, variables are immutable. This is one of many nudges Rust gives you to write your code in a way that takes advantage of the safety and easy concurrency that Rust offers.</p>
        
        <!-- trans:mut-keyword -->
        <p>However, you still have the option to make your variables mutable. Let's explore how and why Rust encourages immutability and why sometimes you might want to opt out.</p>
    </div>

    <div class="demo-section">
        <h2>Data Types</h2>
        
        <!-- trans:scalar-types -->
        <p>Rust has four primary scalar types: integers, floating-point numbers, Booleans, and characters. You may recognize these from other programming languages.</p>
        
        <!-- trans:compound-types -->
        <p>Compound types can group multiple values into one type. Rust has two primitive compound types: tuples and arrays.</p>
    </div>

    <script>
        // 翻译配置
        window.ImmersiveBilingualConfig = {
            translationData: {
                "/example/comment-based-test.html": {
                    "intro": "本版本的文本假设您使用的是 Rust 1.90.0（2025年9月18日发布）或更高版本，并在所有项目的 Cargo.toml 文件中使用 edition = \"2024\" 来配置它们使用 Rust 2024 版本的习惯用法。",
                    "installation": "有关安装或更新 Rust 的说明，请参阅第1章的"安装"部分，有关版本的信息，请参阅附录E。",
                    "variables-intro": "默认情况下，变量是不可变的。这是 Rust 给你的许多推动之一，让你以一种利用 Rust 提供的安全性和简单并发性的方式编写代码。",
                    "mut-keyword": "但是，您仍然可以选择使变量可变。让我们探讨 Rust 如何以及为什么鼓励不可变性，以及为什么有时您可能想要选择退出。",
                    "scalar-types": "Rust 有四种主要的标量类型：整数、浮点数、布尔值和字符。您可能从其他编程语言中认识这些。",
                    "compound-types": "复合类型可以将多个值分组为一种类型。Rust 有两种原始复合类型：元组和数组。"
                }
            }
        };
    </script>
    
    <!-- 引入沉浸式双语库 -->
    <script src="../dist/immersive-bilingual.min.js"></script>
    
    <script>
        function showTranslationData() {
            const instance = window.bilingualInstance;
            if (instance) {
                const data = instance.getTranslationData();
                const info = document.getElementById('info');
                info.innerHTML = '<p><strong>当前翻译数据:</strong></p>' +
                    '<pre style="white-space: pre-wrap; word-break: break-all; font-size: 11px;">' + 
                    JSON.stringify(data, null, 2) + '</pre>';
            }
        }
        
        function toggleAllTranslations() {
            const containers = document.querySelectorAll('.bilingual-container');
            containers.forEach(container => {
                container.classList.toggle('show-original');
            });
        }
        
        // 页面加载完成后显示统计信息
        window.addEventListener('load', () => {
            setTimeout(() => {
                const containers = document.querySelectorAll('.bilingual-container');
                const info = document.getElementById('info');
                info.innerHTML = `<p>已处理 ${containers.length} 个基于注释ID的翻译</p>` +
                    '<p><strong>提示:</strong> 点击翻译文本查看原文和ID，悬停也可以看到ID标签</p>';
            }, 500);
        });
    </script>
</body>
</html>