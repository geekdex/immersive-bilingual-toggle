<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Usage - Immersive Bilingual</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        
        .demo-section {
            margin: 40px 0;
            padding: 30px;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            background: #f8f9fa;
        }
        
        .demo-section h2 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .code-example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .api-demo {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .button-group {
            margin: 20px 0;
        }
        
        .demo-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .demo-button:hover {
            background: #2980b9;
        }
        
        .mixed-content {
            background: #fff3cd;
            padding: 20px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <h1>Advanced Usage Demo</h1>
    <p>This page demonstrates advanced features and API usage of the Immersive Bilingual library.</p>

    <div class="demo-section">
        <h2 data-translate="API Reference">API Reference</h2>
        <p data-translate="The library automatically detects text and applies translations">The library automatically detects text and applies translations</p>
        
        <div class="api-demo">
            <h3>Dynamic Translation Management</h3>
            <div class="button-group">
                <button class="demo-button" onclick="addNewTranslation()">Add New Translation</button>
                <button class="demo-button" onclick="updateTranslationData()">Update Translation Data</button>
                <button class="demo-button" onclick="showCurrentData()">Show Current Data</button>
            </div>
            <div id="api-output"></div>
        </div>
    </div>

    <div class="demo-section">
        <h2 data-translate="Configuration">Configuration</h2>
        <p data-translate="Advanced Usage">Advanced Usage</p>
        
        <div class="code-example">
// Custom configuration example
window.ImmersiveBilingualConfig = {
  translationData: {
    "Custom Text": "Ëá™ÂÆö‰πâÊñáÊú¨",
    "Dynamic Content": "Âä®ÊÄÅÂÜÖÂÆπ"
  },
  clickToToggle: true,
  toggleButtonText: {
    showOriginal: "Show English",
    showTranslation: "ÊòæÁ§∫‰∏≠Êñá"
  }
};
        </div>
    </div>

    <div class="demo-section">
        <h2>Mixed Content Example</h2>
        <div class="mixed-content">
            <p data-translate="Performance">Performance</p>
            <p>This text has no translation and will remain unchanged.</p>
            <p data-translate="Security">Security</p>
            <p>Another untranslated paragraph to show mixed behavior.</p>
            <p data-translate="Testing">Testing</p>
        </div>
    </div>

    <div class="demo-section">
        <h2>Auto-Detection Demo</h2>
        <p>Getting Started</p>
        <p>Installation</p>
        <p>This should not be translated because it's not in our JSON.</p>
        <p>Configuration</p>
        <p>Troubleshooting</p>
    </div>

    <div class="demo-section">
        <h2 data-translate="Troubleshooting">Troubleshooting</h2>
        <ul>
            <li data-translate="FAQ">FAQ</li>
            <li data-translate="Contributing">Contributing</li>
            <li data-translate="License">License</li>
        </ul>
        
        <div class="button-group">
            <button class="demo-button" onclick="toggleLibrary()">Toggle Library On/Off</button>
            <button class="demo-button" onclick="reinitialize()">Reinitialize</button>
        </div>
    </div>

    <!-- Include the library -->
    <script src="../dist/immersive-bilingual.min.js"></script>
    <script>
        let bilingualInstance;
        
        // Configuration
        window.ImmersiveBilingualConfig = {
            translationUrl: './translations.json',
            clickToToggle: true,
            toggleButtonText: {
                showOriginal: 'Show Original üá∫üá∏',
                showTranslation: 'Show Chinese üá®üá≥'
            }
        };
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            bilingualInstance = new ImmersiveBilingual(window.ImmersiveBilingualConfig);
        });
        
        // API Demo Functions
        function addNewTranslation() {
            if (bilingualInstance) {
                bilingualInstance.addTranslation('Dynamic Content', 'Âä®ÊÄÅÊ∑ªÂä†ÁöÑÂÜÖÂÆπ');
                document.getElementById('api-output').innerHTML = 
                    '<p style="color: green;">‚úÖ Added translation for "Dynamic Content"</p>';
                
                // Add a new element to demonstrate
                const newElement = document.createElement('p');
                newElement.setAttribute('data-translate', 'Dynamic Content');
                newElement.textContent = 'Dynamic Content';
                document.getElementById('api-output').appendChild(newElement);
                
                // Re-process to apply new translation
                bilingualInstance.processTextNodes();
            }
        }
        
        function updateTranslationData() {
            if (bilingualInstance) {
                const newData = {
                    'Custom Text': 'Ëá™ÂÆö‰πâÊñáÊú¨ÂÜÖÂÆπ',
                    'Real-time Update': 'ÂÆûÊó∂Êõ¥Êñ∞ÂäüËÉΩ',
                    'API Demo': 'API ÊºîÁ§∫'
                };
                bilingualInstance.setTranslationData(newData);
                document.getElementById('api-output').innerHTML = 
                    '<p style="color: blue;">üîÑ Translation data updated with new entries</p>';
            }
        }
        
        function showCurrentData() {
            if (bilingualInstance) {
                const data = bilingualInstance.translationData;
                const count = Object.keys(data).length;
                document.getElementById('api-output').innerHTML = 
                    `<p style="color: purple;">üìä Current translation data contains ${count} entries</p>
                     <pre style="font-size: 12px; background: #f0f0f0; padding: 10px; border-radius: 4px;">${JSON.stringify(data, null, 2)}</pre>`;
            }
        }
        
        function toggleLibrary() {
            if (bilingualInstance) {
                if (bilingualInstance.initialized) {
                    bilingualInstance.destroy();
                    document.getElementById('api-output').innerHTML = 
                        '<p style="color: red;">‚ùå Library destroyed</p>';
                } else {
                    bilingualInstance.init();
                    document.getElementById('api-output').innerHTML = 
                        '<p style="color: green;">‚úÖ Library reinitialized</p>';
                }
            }
        }
        
        function reinitialize() {
            if (bilingualInstance) {
                bilingualInstance.destroy();
                setTimeout(() => {
                    bilingualInstance = new ImmersiveBilingual(window.ImmersiveBilingualConfig);
                    document.getElementById('api-output').innerHTML = 
                        '<p style="color: green;">üîÑ Library completely reinitialized</p>';
                }, 100);
            }
        }
    </script>
</body>
</html>